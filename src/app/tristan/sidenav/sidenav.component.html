<button class="absolute top-50 left-0 z-5 -rotate-90" (click)="drawer.toggle()" mat-button>Workspace-Menü</button>
<mat-drawer-container class="h-screen" autosize>
  <mat-drawer #drawer class="border-solid p-4" mode="side" [opened]="true">
    <div class="flex align-items-center justify-content-between">
      <div class="flex align-items-center">
        <img src="img/devspace.png" alt="devspace-logo">
        <h3 class="text-3xl m-2">Devspace</h3>
      </div>
      <img class="cursor-pointer" src="img/new-message.png" alt="new-message-logo">
    </div>

    <mat-tree class="mt-5" [dataSource]="dataSource" [treeControl]="treeControl">
      <!-- Standard-Knoten -->
      <mat-tree-node *matTreeNodeDef="let node" matTreeNodePadding>
        <div class="flex align-items-center cursor-pointer">
          <button mat-icon-button disabled></button>
          <ng-container *ngIf="node">
            <!-- Kanal -->
            <img *ngIf="isChannelNode(node)" class="mr-3" src="img/channel.png" alt="channel">
            <!-- Kanal hinzufügen -->
            <img *ngIf="isActionNode(node)" class="mr-3" src="img/add-channel-2.png" alt="add-channel">
            <!-- Private Message -->
            <!-- <img *ngIf="isPrivateMessage(node)" class="mr-3" src="img/avatar-private-message.png" alt="avatar-logo"> -->
          </ng-container>
          <span (click)="handleNodeClick(node)"
                [ngClass]="{
                  'cursor-pointer': true,
                  'channel-name': isNewChannel(node),
                  'category-name': isCategoryNode(node),
                  'font-bold': isCategoryNode(node)
                }">{{node.name}}</span>
        </div>
      </mat-tree-node>

      <!-- Erweiterbare Knoten -->
      <mat-tree-node *matTreeNodeDef="let node; when: hasChild" matTreeNodePadding>
        <div class="flex align-items-center justify-content-between cursor-pointer" matTreeNodeToggle style="width: 100%;">
          <div class="flex align-items-center">
            <button mat-icon-button (click)="$event.stopPropagation()" matTreeNodeToggle>
              <mat-icon class="mat-icon-rtl-mirror">
                {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
              </mat-icon>
            </button>
            <ng-container *ngIf="node">
              <!-- Kategorien -->
              <img *ngIf="isCategoryNode(node) && node.name === 'Channels'" class="mr-3" src="img/channels.png" alt="channels">
              <img *ngIf="isCategoryNode(node) && node.name === 'Direktnachrichten'" class="mr-3" src="img/private-messages.png" alt="direct-messages">
            </ng-container>
            <span matTreeNodeToggle
                  [ngClass]="{
                    'cursor-pointer': true,
                    'font-bold': isCategoryNode(node)
                  }">{{node.name}}</span>
          </div>
          <ng-container *ngIf="node.name === 'Channels'">
            <img class="ml-auto" src="img/add-channel.png" alt="add" (click)="openDialog()">
          </ng-container>
        </div>
      </mat-tree-node>
    </mat-tree>
  </mat-drawer>

  <div class="router-container">
    <app-chat *ngIf="selectedChannel"></app-chat>
  </div>
</mat-drawer-container>