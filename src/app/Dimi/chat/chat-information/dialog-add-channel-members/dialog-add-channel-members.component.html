<main>
  <section [ngStyle]="{ width: '100%' }">
    <div class="headline">
      <h3 class="text-2xl">Leute hinzufügen</h3>
      <img
        [src]="closeImg"
        (mouseenter)="changeCloseImg(true)"
        (mouseleave)="changeCloseImg(false)"
        class="close"
        (click)="closeDialog()"
      />
    </div>
    <div class="channel-name">
      <img src="./img/tag-hover-thin.svg" />
      <p>{{ selectedChannel.name }}</p>
    </div>
  </section>

  <section class="inputfield">
    <input
      type="text"
      class="inputfield-name"
      placeholder="Name eingeben"
      #inputName
    />
    <div
      class="arrange-selected-user"
      *ngIf="selectedUser.length > 0"
    >
        @for (user of selectedUser; track $index) {
          <div class="selected-user">
            <img [src]="user.avatar" class="user-avatar-img" />
            <p>{{ user.username }}</p>
            <img
              (mouseenter)="changeRemoveSelectedUserImg(true)"
              (mouseleave)="changeRemoveSelectedUserImg(false)"
              [src]="removeSelectedUserImg"
              (click)="removeSelectedUser()"
              class="remove-selected-user-img"
            />
          </div>
        }
    </div>

    <div class="input-results" *ngIf="searchResults.length > 0">
      <ul>
        @for (result of searchResults; track $index) {
          <li (click)="putUserToInputfield(result)">
            <img [src]="result.avatar" />
            <span>
              <h4>{{ result.username }}</h4>
              <p>{{ result.mail }}</p>
            </span>
          </li>
        }
      </ul>
    </div>
  </section>

  <button
    [ngClass]="{ 'active-btn': selectedUser.length > 0 }"
    [disabled]="selectedUser.length === 0"
    (click)="addUserToChannel(selectedUser[0])"
  >
    hinzufügen
  </button>
</main>
